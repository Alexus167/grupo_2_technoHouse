
<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head')%>   
    <title>Listado de Productos</title>
</head>
<body>
    <%- include('partials/header')%>   

    <div class="container">
        <h1 class="titulo">Listado de Productøs</h1>
      
        <section class="row ">
            <% productos.forEach(producto=> { %>
              <article class="col-12 col-md-4 col-lg-3 ">
                <ul class="list-group list-group-flush my-3 ">
                  <img src="/images/productos/<%=producto.image%> " class="img-fluid" alt="">
                  <li class="list-group-item">
                    <h4 class="nameProducto">
                      <%= producto.name %>
                    </h4>
                  </li>
      
                  <li class="list-group-item">
                    <h6 class="precioF">
                     Precio final $<%= producto.price %>
                    </h6>
                  </li>
                  <!-- <li class="list-group-item">
                    <p class="categoria">Categoria</p>
                    <h5 class="button type4"> <%= producto.category.name %></h5>
                  </li> -->

<!--                   <li class="list-group-item"><a href="" data-bs-toggle="modal" data-bs-target="#exampleModal -<%= producto.id %> "><%=producto.image%></a></li> 
 -->                      

                  <li class="list-group-item">

                    <% if (typeof user != 'undefined' && user.rol) { %>
                      <div class="m-2 d-flex justify-content-around">
                        <form action="/products/edit/<%= producto.id %>">
                          <button class="btn btn-sm btn-secondary" type="submit">Editar</a></button> 
                        </form>
                        <form action="/products/delete/<%= producto.id %>?_method=DELETE" method="POST">
                          <button class="btn btn-sm btn-danger" type="submit">Eliminar</a></button> 
                        </form>
                        <form action="/products/detail/<%= producto.id %>">
                          <button class="btn btn-sm btn-success" type="submit">Ver más</a></button> 
                        </form>
                      </div>
                    <% } else { %>
                      <div class="m-2 d-flex justify-content-around">
                        <form action="/products/detail/<%= producto.id %>">
                          <button class="btn btn-sm btn-success" type="submit">Ver más</a></button> 
                        </form>
                      </div>
                      <% } %>
                    
                  </li>
                </ul>
              </article>
              <!-- Modal -->
              <div class="modal fade" id="exampleModal-<%= producto.id %>" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h6 class="modal-title" id="exampleModalLabel"><%= producto.name %> - <%= producto.category.name %> </h6>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <img src="/images/productos/<%=producto.image%> " class="img-fluid" alt="">
                    </div>
                  </div>
                </div>
              </div>
              <% }) %>

              <% if (!productos.length) { %>
               <h1 class="my-5">No encontramos productos</h1>
              <% } %>

          </section>
    </div>
    
    <%- include('partials/footer')%>   
</body>
</html>